{% extends "banking/netbanking_base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto p-4">

    <!-- Print Button -->
    {% if transactions %}
    <div class="flex justify-end mb-6">
        <button onclick="window.print()"
            class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold shadow-md transition-all flex items-center">
            <i class="fas fa-print mr-2"></i>Print Statement
        </button>
    </div>
    {% endif %}

    <!-- Transaction Table -->
    {% if transactions %}
    <div class="overflow-x-auto bg-white rounded-xl shadow-md">
        <table class="min-w-full">
            <thead>
                <tr class="bg-green-50 text-gray-700 uppercase text-sm">
                    <th class="py-4 px-6 text-left font-medium">Date & Time</th>
                    <th class="py-4 px-6 text-left font-medium">Type</th>
                    <th class="py-4 px-6 text-right font-medium">Amount</th>
                    <th class="py-4 px-6 text-left font-medium">Description</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                {% for tx in transactions %}
                <tr class="hover:bg-green-50/50 transition-colors duration-150">
                    <!-- Date & Time -->
                    <td class="py-4 px-6 whitespace-nowrap">
                        <div class="text-gray-900">{{ tx.timestamp|date:"d M Y" }}</div>
                        <div class="text-sm text-gray-500">{{ tx.timestamp|date:"h:i A" }}</div>
                    </td>

                    <!-- Type -->
                    <td class="py-4 px-6">
                        {% if tx.transaction_type|lower == 'credit' %}
                        <span
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800">
                            <i class="fas fa-arrow-down mr-1 text-xs"></i>Credit
                        </span>
                        {% elif tx.transaction_type|lower == 'debit' %}
                        <span
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800">
                            <i class="fas fa-arrow-up mr-1 text-xs"></i>Debit
                        </span>
                        {% else %}
                        <span
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800">
                            {{ tx.transaction_type }}
                        </span>
                        {% endif %}
                    </td>

                    <!-- Amount -->
                    <td
                        class="py-4 px-6 text-right font-medium {% if tx.transaction_type|lower == 'credit' %}text-green-600{% elif tx.transaction_type|lower == 'debit' %}text-red-600{% else %}text-gray-600{% endif %}">
                        {% if tx.transaction_type|lower == 'credit' %}
                        + ₹{{ tx.amount|floatformat:1 }}
                        {% elif tx.transaction_type|lower == 'debit' %}
                        - ₹{{ tx.amount|floatformat:1 }}
                        {% else %}
                        ₹{{ tx.amount|floatformat:1 }}
                        {% endif %}
                    </td>

                    <!-- Description -->
                    <td class="py-4 px-6 text-gray-600">{{ tx.description }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-16 bg-white rounded-xl shadow-md">
        <div class="max-w-md mx-auto">
            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-exchange-alt text-gray-400 text-xl"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-600 mb-2">No transactions yet</h3>
            <p class="text-gray-500">Your transaction history will appear here</p>
        </div>
    </div>
    {% endif %}
</div>

<!-- Print-specific CSS -->
<style>
    @media print {
        body * {
            visibility: hidden;
        }

        .max-w-6xl,
        .max-w-6xl * {
            visibility: visible;
        }

        .max-w-6xl {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 0;
        }

        button {
            display: none;
        }

        /* Ensure colors print correctly */
        .bg-green-50,
        .bg-green-100,
        .bg-red-100 {
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
    }
</style>
{% endblock %}